angular.module("PlatypusLab",["ngRoute","ngMaterial","pvarache.APIUrls","ngMockE2E","ngColorThief","PlatypusLab.controller","PlatypusLab.service","PlatypusLab.platypus"]).config(["APIUrlsProvider",function(APIUrlsProvider){APIUrlsProvider.hostname="localhost",APIUrlsProvider.secure=!1,APIUrlsProvider.port=3e3,APIUrlsProvider.urls={platypuses:"/platypuses",platypus:function(id){return"/platypuses/"+id}}}]).directive("ngRightClick",function($parse){return function(scope,element,attrs){var fn=$parse(attrs.ngRightClick);element.bind("contextmenu",function(event){scope.$apply(function(){event.preventDefault(),fn(scope,{$event:event})})})}}),angular.module("PlatypusLab").run(["$httpBackend",function($httpBackend){var list=[{_id:"1",name:"Perry",picture:"img/pictures/perry.jpg",info:"Agent P."},{_id:"2",name:"Noah",picture:"img/pictures/noah.jpg",info:"PlatyArk"},{_id:"3",name:"Lindsay",picture:"img/pictures/lindsay.jpg",info:"PlatyGirl"},{_id:"4",name:"Robert",picture:"img/pictures/robert.jpg",info:"PlatyBaratheon"},{_id:"5",name:"Spencer",picture:"img/pictures/spencer.jpg",info:"PlatyMark"},{_id:"6",name:"Billy",picture:"img/pictures/billy.jpg",info:"PlatyTheKid"},{_id:"7",name:"Harry",picture:"img/pictures/harry.jpg",info:"PlatyPotter"},{_id:"8",name:"Bobby",picture:"img/pictures/bobby.jpg",info:"PlatyJerk"},{_id:"9",name:"Sono",picture:"img/pictures/sono.jpg",info:"Platy"},{_id:"10",name:"Beakbird",picture:"img/pictures/beakbird.jpg",info:"Platypus"}];$httpBackend.whenGET("http://localhost:3000/platypuses").respond(list),$httpBackend.whenGET(/http:\/\/localhost:3000\/platypuses\/\d+/).respond(function(method,url){var parts=url.split("/"),id=parts[parts.length-1];for(var i in list)if(list[i]._id===id)return[200,list[i],{"Cache-Control":"max-age=60"}];return[404]}),$httpBackend.whenDELETE(/http:\/\/localhost:3000\/platypuses\/\d+/).respond(function(method,url){var parts=url.split("/"),id=parts[parts.length-1];for(var i in list)if(list[i]._id===id)return list.splice(i,1),[204];return[204]}),$httpBackend.whenPOST("http://localhost:3000/platypuses").respond(function(method,url,data){var pl=angular.fromJson(data);return pl._id=list.length+1,list.push(pl),[200,pl,{}]}),$httpBackend.whenGET(/^templates\/.*/).passThrough(),$httpBackend.whenGET(/^\img\/.*/).passThrough()}]),angular.module("PlatypusLab").config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"templates/platypus.list.html",controller:"PlatypusListController",resolve:{platypuses:["Api",function(Api){return Api.listPlatypuses().then(function(res){return res.data})}]}}).when("/platypus/:id",{templateUrl:"templates/platypus.details.html",controller:"PlatypusDetailsController",resolve:{platypus:["Api","$route",function(Api,$route){return Api.getPlatypus($route.current.params.id).then(function(res){return res.data})}]}}).otherwise({redirectTo:"/"})}]),angular.module("PlatypusLab.service",[]),angular.module("PlatypusLab.service").service("Api",["$http","APIUrls","$mdToast",function($http,APIUrls,$mdToast){function onError(reason,statusCode){console.log(reason,statusCode);var toast=$mdToast.simple();reason||0!==statusCode||(toast=toast.content("The Platypus API does not seem to be online")),$mdToast.show(toast)}return{listPlatypuses:function(){return $http.get(APIUrls.getUrl("platypuses")).error(onError)},getPlatypus:function(id){return $http.get(APIUrls.getUrl("platypus",id)).error(onError)},addPlatypus:function(platypus){return $http.post(APIUrls.getUrl("platypuses"),platypus).error(onError)},deletePlatypus:function(platypus){return $http["delete"](APIUrls.getUrl("platypus",platypus._id)).error(onError)}}}]),angular.module("PlatypusLab.controller",[]),angular.module("PlatypusLab").controller("LayoutController",["$scope","$rootScope","$mdDialog",function($scope,$rootScope,$mdDialog){$scope.$on("$routeChangeStart",function(event,toRoute){toRoute&&toRoute.$$route&&($scope.path=toRoute.$$route.originalPath)}),$rootScope.color={dominant:[63,81,181]}}]).filter("rgbArray",function(){return function(rgb){return"rgb("+rgb[0]+","+rgb[1]+","+rgb[2]+")"}}),angular.module("PlatypusLab.platypus",[]),angular.module("PlatypusLab.platypus").controller("PlatypusListController",["$scope","$rootScope","$mdDialog","$location","platypuses",function($scope,$rootScope,$mdDialog,$location,platypuses){$scope.platypuses=platypuses,$scope.toolbar={isOpen:!1},$scope.select=function(platypus){platypus.selected=!platypus.selected,$scope.editing=$scope.platypuses.filter(function(pl){return pl.selected})},$scope["delete"]=function(ev){$mdDialog.show({controller:"PlatypusDeleteController",templateUrl:"templates/platypus.delete.html",parent:angular.element(document.body),targetEvent:ev,locals:{platypuses:$scope.editing}}).then(function(){$scope.editing=$scope.editing.map(function(item){return item._id}),$scope.platypuses=$scope.platypuses.filter(function(i){return-1===$scope.editing.indexOf(i._id)}),$scope.editing=[]})},$scope.add=function(ev){$mdDialog.show({controller:"PlatypusAddController",templateUrl:"templates/platypus.add.html",parent:angular.element(document.body),targetEvent:ev}).then(function(platypus){platypus&&$scope.platypuses.push(platypus)})},$scope.goToPlatypus=function(id,event){$location.path("/platypus/"+id)}}]).controller("PlatypusAddController",["$scope","$mdDialog","Api",function($scope,$mdDialog,Api){$scope.platypus={},$scope.cancel=function(){$mdDialog.cancel()},$scope.save=function(){Api.addPlatypus($scope.platypus).success(function(platypus){$mdDialog.hide(platypus)})}}]).controller("PlatypusDeleteController",["$scope","$mdDialog","$q","Api","platypuses",function($scope,$mdDialog,$q,Api,platypuses){$scope.platypuses=platypuses,$scope.cancel=function(){$mdDialog.cancel()},$scope.save=function(){var tasks=platypuses.map(function(pl){return Api.deletePlatypus(pl)});$q.all(tasks).then(function(){$mdDialog.hide()})["catch"](function(reason){console.error(reason)})}}]).controller("PlatypusDetailsController",["$scope","$rootScope","platypus",function($scope,$rootScope,platypus){$scope.platypus=platypus,$scope.$on("$destroy",function(){$rootScope.color.dominant=[63,81,181]})}]),angular.module("PlatypusLab").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("templates/platypus.add.html",'<md-dialog class=full-size aria-label="Add a platypus"><form flex><md-toolbar><div class=md-toolbar-tools><h2>Add a platypus</h2><span flex></span><md-button class=md-icon-button ng-click=cancel()><md-icon md-svg-src=img/icons/clear.svg aria-label="Close dialog"></md-icon></md-button></div></md-toolbar><md-modal-content layout=column flex><div layout=column layout-padding=5 flex><md-input-container><label>Name</label><input ng-model="platypus.name"></md-input-container><md-input-container><label>Picture</label><input ng-model="platypus.picture"></md-input-container><md-input-container><label>Infos</label><textarea ng-model=platypus.info columns=1 md-maxlength=140></textarea></md-input-container></div><div class=md-actions layout=row><md-button class=md-default ng-click=cancel()>Cancel</md-button><md-button class=md-primary ng-click=save()>Save</md-button></div></md-modal-content></form></md-dialog>'),$templateCache.put("templates/platypus.delete.html",'<md-dialog aria-label="Delete platypuses"><form flex><md-toolbar><div class=md-toolbar-tools><h2>Delete platypuses</h2><span flex></span><md-button class=md-icon-button ng-click=cancel()><md-icon md-svg-src=img/icons/clear.svg aria-label="Close dialog"></md-icon></md-button></div></md-toolbar><md-modal-content layout=column><p style="padding: 10px">Are you sure you want to delete theses platypuses ?</p><div class=md-actions layout=row><md-button class=md-default ng-click=cancel()>Cancel</md-button><md-button class=md-primary ng-click=save()>Confirm</md-button></div></md-modal-content></form></md-dialog>'),$templateCache.put("templates/platypus.details.html",'<md-toolbar style="background-color: {{ color.dominant | rgbArray }}"><div class=md-toolbar-tools><md-button class=md-icon-button aria-label=Back ng-href="#/"><md-icon md-svg-src=img/icons/navigate_before.svg></md-icon></md-button><h2><span>{{platypus.name}}</span></h2><span flex></span></div></md-toolbar><md-content flex layout=column><div layout=column><img src={{platypus.picture}} style="width: 100%" cross-origin color-thief color-thief-dominant=color.dominant><md-content layout=column layout-padding=5px><h3>{{platypus.name}}</h3><md-divider></md-divider><p>{{platypus.info}}</p></md-content></div></md-content>'),$templateCache.put("templates/platypus.list.html",'<md-toolbar style="background-color: {{ color.dominant | rgbArray }}"><div class=md-toolbar-tools><h2><span>Platypus Lab</span></h2><span flex></span><md-button class=md-icon-button ng-if=editing.length ng-click=delete() aria-label=Delete><md-icon md-svg-src=img/icons/delete.svg></md-icon></md-button></div></md-toolbar><md-content flex layout=column><md-list><md-list-item class=md-2-line ng-repeat="platypus in platypuses track by $index"><img ng-src={{platypus.picture}} class=md-avatar ng-class="{\'selected\': platypus.selected}" ng-right-click=select(platypus)><div class=md-list-item-text ng-click=goToPlatypus(platypus._id)><h3>{{platypus.name}}</h3><p>{{platypus.info}}</p></div></md-list-item></md-list><md-button aria-label=add class="md-fab md-warn" ng-class="\'add-button\'" ng-click=add($event)><md-icon md-svg-src=img/icons/add.svg></md-icon></md-button></md-content>')}]);